{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fabi\\\\Desktop\\\\Uni\\\\Master\\\\4. Semester\\\\MA\\\\WebGIS\\\\dashboard_client\\\\src\\\\components\\\\DistrictInfo.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setDistrict } from '../redux/actions/setDistrictAction';\nimport Button from './Button';\nimport { proxyUrls } from '../utils/MapConfig';\nimport Loading from './Loading';\n\nconst DistrictInfo = props => {\n  const [districtData, setDistrictData] = useState([]);\n  const [fetched, setFetched] = useState(false);\n  const district = useSelector(state => state.currentDistrictState.district);\n  const dispatch = useDispatch();\n  const {\n    title,\n    fetchUrl,\n    defaultText\n  } = props;\n\n  async function dropdownChange(e) {\n    const currentDistrict = await dispatch(setDistrict(e.target.value));\n    return await currentDistrict;\n  }\n\n  function buttonClick() {\n    if (district === '' || district === defaultText) {\n      setDistrictData([]);\n      setFetched(false);\n      return;\n    } else {\n      setFetched(true);\n      fetch(`${proxyUrls[4]}${district}`).then(response => response.json()).then(data => {\n        const obj = data[0];\n        const values = Object.keys(obj).map(key => {\n          return obj[key];\n        }); //@ts-ignore\n\n        setDistrictData(values);\n      }).then(() => setFetched(true));\n    }\n  }\n\n  useEffect(() => {\n    let dropdown = document.createElement('select');\n    dropdown.length = 0;\n    let defaultOption = document.createElement('option');\n    defaultOption.text = defaultText;\n    dropdown.add(defaultOption);\n    dropdown.addEventListener('change', e => {\n      dropdownChange(e).then(() => buttonClick());\n    });\n    dropdown.selectedIndex = 0;\n    document.getElementsByClassName('dropdown')[0].appendChild(dropdown);\n    const url = fetchUrl;\n    fetch(url).then(response => {\n      if (response.status !== 200) {\n        console.log('Status Code not 200: ' + response.status);\n        return;\n      }\n\n      response.json().then(data => {\n        let option;\n\n        for (let i = 0; i < data.length; i++) {\n          option = document.createElement('option');\n          option.text = data[i].stt_name;\n          option.value = data[i].stt_name;\n          dropdown.add(option);\n        }\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, title), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    text: \"Stadtteildaten abrufen\",\n    clickButton: buttonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }), fetched ? districtData.length === 0 ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 52\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Im gew\\xE4hlten Stadtteil existieren im zu Grunde liegenden Datensatz \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 87\n    }\n  }, districtData[0]), \" Hausumringe. In \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 128\n    }\n  }, districtData[1], \" (\", districtData[3], \"%)\"), \" davon haben sich mit Corona infizierte Personen aufgehalten. Nicht betroffen sind somit \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 262\n    }\n  }, districtData[2], \" (\", districtData[4], \"%)\"), \".\") : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"Kein Stadtteil gew\\xE4hlt.\"));\n};\n\nexport default DistrictInfo;","map":{"version":3,"sources":["C:/Users/Fabi/Desktop/Uni/Master/4. Semester/MA/WebGIS/dashboard_client/src/components/DistrictInfo.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","setDistrict","Button","proxyUrls","Loading","DistrictInfo","props","districtData","setDistrictData","fetched","setFetched","district","state","currentDistrictState","dispatch","title","fetchUrl","defaultText","dropdownChange","e","currentDistrict","target","value","buttonClick","fetch","then","response","json","data","obj","values","Object","keys","map","key","dropdown","document","createElement","length","defaultOption","text","add","addEventListener","selectedIndex","getElementsByClassName","appendChild","url","status","console","log","option","i","stt_name","catch","err"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { IDistrictInfoProps } from '../types/types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setDistrict } from '../redux/actions/setDistrictAction';\r\nimport { RootState } from '../redux/store/store';\r\nimport Button from './Button'\r\nimport { proxyUrls } from '../utils/MapConfig';\r\nimport Loading from './Loading';\r\n\r\nconst DistrictInfo = (props: IDistrictInfoProps) => {\r\n\r\n    const [districtData, setDistrictData] = useState([]);\r\n    const [fetched, setFetched] = useState(false);\r\n    const district = useSelector((state: RootState) => state.currentDistrictState.district)\r\n    const dispatch = useDispatch();\r\n\r\n    const {\r\n        title,\r\n        fetchUrl,\r\n        defaultText,\r\n    } = props\r\n\r\n    async function dropdownChange(e: any) {\r\n        const currentDistrict = await dispatch(setDistrict(e.target!.value))\r\n        return await currentDistrict;\r\n    }\r\n    function buttonClick() {\r\n        if (district === '' || district === defaultText) {\r\n            setDistrictData([])\r\n            setFetched(false);\r\n            return;\r\n        }\r\n        else {\r\n            setFetched(true)\r\n            fetch(`${proxyUrls[4]}${district}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const obj = data[0];\r\n                    const values: number[] = Object.keys(obj).map(key => { return obj[key]; });\r\n                    //@ts-ignore\r\n                    setDistrictData(values)\r\n                })\r\n                .then(() => setFetched(true))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let dropdown = document.createElement('select');\r\n        dropdown.length = 0;\r\n\r\n        let defaultOption = document.createElement('option');\r\n        defaultOption.text = defaultText;\r\n\r\n        dropdown.add(defaultOption);\r\n        dropdown.addEventListener('change', (e: any) => {\r\n            dropdownChange(e)\r\n                .then(() => buttonClick())\r\n        })\r\n        dropdown.selectedIndex = 0;\r\n        document.getElementsByClassName('dropdown')[0].appendChild(dropdown);\r\n\r\n        const url = fetchUrl;\r\n\r\n        fetch(url)\r\n            .then(\r\n                response => {\r\n                    if (response.status !== 200) {\r\n                        console.log('Status Code not 200: ' +\r\n                            response.status);\r\n                        return;\r\n                    }\r\n\r\n                    response.json().then(data => {\r\n                        let option;\r\n\r\n                        for (let i = 0; i < data.length; i++) {\r\n                            option = document.createElement('option');\r\n                            option.text = data[i].stt_name;\r\n                            option.value = data[i].stt_name;\r\n                            dropdown.add(option);\r\n                        }\r\n                    });\r\n                }\r\n            )\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <p>{title}</p>\r\n            <div className='dropdown' ></div>\r\n            <Button\r\n                text='Stadtteildaten abrufen'\r\n                clickButton={buttonClick}\r\n            />\r\n            {fetched ? districtData.length === 0 ? <Loading /> :\r\n                <p>Im gewählten Stadtteil existieren im zu Grunde liegenden Datensatz <b>{districtData[0]}</b> Hausumringe. In <b>{districtData[1]} ({districtData[3]}%)</b> davon haben sich mit Corona infizierte Personen aufgehalten. Nicht betroffen sind somit <b>{districtData[2]} ({districtData[4]}%)</b>.</p>\r\n                :\r\n                <p>Kein Stadtteil gewählt.</p>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default DistrictInfo;"]},"metadata":{},"sourceType":"module"}